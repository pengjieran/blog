---
title: OAuth2认证和授权原理
date: 2016-05-02 16:16:25
categories: [oauth2]
tags: [认证]
---

本篇文章主要介绍OAuth2.0版本的认证规则。每个站点的oauth认证流程都是相同的，看了本篇文章，相信你能对oauth有更深的认识
<!-- more -->

# OAuth2.0认证和授权原理解析
OAuth是一个关于授权（authorization）的开放网络标准，在全世界得到广泛应用，目前的版本是2.0版。
本文对OAuth 2.0的设计思路和运行流程，做一个简明通俗的解释，主要参考材料为<a href="http://www.rfcreader.com/#rfc6749">rfc6749</a>
# 应用场景
为了理解适用场景，假设一个场景。
有一个叫”爱阅读”的应用，想要利用QQ众多的用户群，获取QQ用户的信息，关键问题是，腾讯是不会允许这款应用直接读取用户信息的，
另外一种方案是存储用户的qq账号和密码，通过登录获取信息，但是，直接存储用户名和密码是不安全的，一旦用户修改了qq密码，这个
应用也是不知道的，从而无法获取用户信息。尊重隐私权的考虑，也不应该在用户不知情的情况下直接读取用户信息。OAuth就是为了解决上面这种场景诞生的。
# 名词定义
OAuth2.0定义了如下几个专业名词，理解这几个名词对理解后面的讲解至关重要。
1. Third-party application
第三方应用，又称client,客户端，即上一节提到的那个应用
2. HTTP service
http服务提供方，即上一节所说的QQ
3. Resource Owner
资源所有者，即QQ用户
4. User Agent
用户代理，本文中就是指浏览器。
5. Authorization server
认证服务器，即服务提供商专门用来处理认证的服务器。
6. Resource server
资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。
# OAuth的思路
OAuth在客户端和资源提供方之间设置了一个授权层，客户端不能直接从资源提供方获取资源，只能先访问授权层，以此将用户和客户端区分开，
客户端访问资源所使用的令牌，与用户的密码不同，用户可以在登录的时候，指定授权层令牌的权限范围和有效期。客户端在访问用户资源时，
资源层根据令牌的访问范围和有效期，开放指定资源的访问权限
# 运行流程
OAuth2.0的运行流程如下，摘自<a href="http://www.rfcreader.com/#rfc6749">rfc6749</a>
